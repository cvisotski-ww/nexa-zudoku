"use strict";(globalThis.webpackChunk_clerk_clerk_js=globalThis.webpackChunk_clerk_clerk_js||[]).push([[132],{2666:function(e,o,t){t.d(o,{fB:function(){return u},gW:function(){return p},uj:function(){return a}});var n=t(2903),r=t(3736),s=t(8246),i=t(5015),c=t(3476),l=t(8512),d=t(7790);const u=e=>{const{navigate:o}=(0,r.useRouter)(),{handleManageAccountClicked:t,handleSignOutSessionClicked:d,handleUserProfileActionClicked:u,session:a}=e,{menutItems:p}=(0,i.useUserButtonContext)(),B=e=>({borderTopWidth:e.borderWidths.$normal,borderTopStyle:e.borderStyles.$solid,borderTopColor:e.colors.$neutralAlpha100,padding:`${e.space.$4} ${e.space.$5}`});return(0,n.tZ)(l.Actions,{role:"menu",elementDescriptor:c.descriptors.userButtonPopoverActions,elementId:c.descriptors.userButtonPopoverActions.setId("singleSession"),sx:e=>({borderTopWidth:e.borderWidths.$normal,borderTopStyle:e.borderStyles.$solid,borderTopColor:e.colors.$neutralAlpha100}),children:null==p?void 0:p.map((r=>{let i;return i=Object.values(s.Zb).includes(r.id)?{elementDescriptor:c.descriptors.userButtonPopoverActionButton,elementId:c.descriptors.userButtonPopoverActionButton.setId(r.id),iconBoxElementDescriptor:c.descriptors.userButtonPopoverActionButtonIconBox,iconBoxElementId:c.descriptors.userButtonPopoverActionButtonIconBox.setId(r.id),iconElementDescriptor:c.descriptors.userButtonPopoverActionButtonIcon,iconElementId:c.descriptors.userButtonPopoverActionButtonIcon.setId(r.id)}:{elementDescriptor:c.descriptors.userButtonPopoverCustomItemButton,elementId:c.descriptors.userButtonPopoverCustomItemButton.setId(r.id),iconBoxElementDescriptor:c.descriptors.userButtonPopoverCustomItemButtonIconBox,iconBoxElementId:c.descriptors.userButtonPopoverCustomItemButtonIconBox.setId(r.id),iconElementDescriptor:c.descriptors.userButtonPopoverActionItemButtonIcon,iconElementId:c.descriptors.userButtonPopoverActionItemButtonIcon.setId(r.id)},(0,n.tZ)(l.Action,{...i,icon:r.icon,label:r.name,onClick:r.id===s.Zb.SIGN_OUT?d(a):()=>(async n=>{var r;return(null==n?void 0:n.path)?(await o(n.path),null==e?void 0:e.completedCallback()):n.id===s.Zb.MANAGE_ACCOUNT?await t():(null==n?void 0:n.open)?u(n.open):(null===(r=n.onClick)||void 0===r||r.call(n),null==e?void 0:e.completedCallback())})(r),sx:B,iconSx:e=>({width:e.sizes.$4,height:e.sizes.$4})},r.id)}))})},a=e=>{const{navigate:o}=(0,r.useRouter)(),{handleManageAccountClicked:t,handleSignOutSessionClicked:u,handleSessionClicked:a,handleAddAccountClicked:p,handleUserProfileActionClicked:B,session:m,otherSessions:v}=e,{menutItems:I}=(0,i.useUserButtonContext)(),A=I.every((e=>Object.values(s.Zb).includes(e.id)));return(0,n.BX)(n.HY,{children:[A?(0,n.tZ)(l.SmallActions,{role:"menu",elementDescriptor:c.descriptors.userButtonPopoverActions,elementId:c.descriptors.userButtonPopoverActions.setId("multiSession"),children:(0,n.BX)(c.Flex,{justify:"between",sx:e=>({marginLeft:e.space.$12,padding:`0 ${e.space.$5} ${e.space.$4}`,gap:e.space.$2}),children:[(0,n.tZ)(l.SmallAction,{elementDescriptor:c.descriptors.userButtonPopoverActionButton,elementId:c.descriptors.userButtonPopoverActionButton.setId("manageAccount"),iconBoxElementDescriptor:c.descriptors.userButtonPopoverActionButtonIconBox,iconBoxElementId:c.descriptors.userButtonPopoverActionButtonIconBox.setId("manageAccount"),iconElementDescriptor:c.descriptors.userButtonPopoverActionButtonIcon,iconElementId:c.descriptors.userButtonPopoverActionButtonIcon.setId("manageAccount"),icon:d.tc,label:(0,c.localizationKeys)("userButton.action__manageAccount"),onClick:t}),(0,n.tZ)(l.SmallAction,{elementDescriptor:c.descriptors.userButtonPopoverActionButton,elementId:c.descriptors.userButtonPopoverActionButton.setId("signOut"),iconBoxElementDescriptor:c.descriptors.userButtonPopoverActionButtonIconBox,iconBoxElementId:c.descriptors.userButtonPopoverActionButtonIconBox.setId("signOut"),iconElementDescriptor:c.descriptors.userButtonPopoverActionButtonIcon,iconElementId:c.descriptors.userButtonPopoverActionButtonIcon.setId("signOut"),icon:d.lv,label:(0,c.localizationKeys)("userButton.action__signOut"),onClick:u(m)})]})}):(0,n.tZ)(l.SmallActions,{role:"menu",elementDescriptor:c.descriptors.userButtonPopoverActions,elementId:c.descriptors.userButtonPopoverActions.setId("multiSession"),sx:e=>({gap:e.space.$1,paddingBottom:e.space.$2}),children:null==I?void 0:I.map((r=>{let i;return i=Object.values(s.Zb).includes(r.id)?{elementDescriptor:c.descriptors.userButtonPopoverActionButton,elementId:c.descriptors.userButtonPopoverActionButton.setId(r.id),iconBoxElementDescriptor:c.descriptors.userButtonPopoverActionButtonIconBox,iconBoxElementId:c.descriptors.userButtonPopoverActionButtonIconBox.setId(r.id),iconElementDescriptor:c.descriptors.userButtonPopoverActionButtonIcon,iconElementId:c.descriptors.userButtonPopoverActionButtonIcon.setId(r.id)}:{elementDescriptor:c.descriptors.userButtonPopoverCustomItemButton,elementId:c.descriptors.userButtonPopoverCustomItemButton.setId(r.id),iconBoxElementDescriptor:c.descriptors.userButtonPopoverCustomItemButtonIconBox,iconBoxElementId:c.descriptors.userButtonPopoverCustomItemButtonIconBox.setId(r.id),iconElementDescriptor:c.descriptors.userButtonPopoverActionItemButtonIcon,iconElementId:c.descriptors.userButtonPopoverActionItemButtonIcon.setId(r.id)},(0,n.tZ)(l.Action,{...i,icon:r.icon,label:r.name,onClick:r.id===s.Zb.SIGN_OUT?u(m):()=>(async n=>{var r;return(null==n?void 0:n.path)?(await o(n.path),null==e?void 0:e.completedCallback()):n.id===s.Zb.MANAGE_ACCOUNT?await t():(null==n?void 0:n.open)?B(n.open):(null===(r=n.onClick)||void 0===r||r.call(n),null==e?void 0:e.completedCallback())})(r),sx:e=>({border:0,padding:`${e.space.$2} ${e.space.$5}`,gap:e.space.$3x5}),iconSx:e=>({width:e.sizes.$4,height:e.sizes.$4}),iconBoxSx:e=>({minHeight:e.sizes.$4,minWidth:e.sizes.$4,alignItems:"center"})},r.id)}))}),(0,n.BX)(l.Actions,{role:"menu",sx:e=>({borderTopStyle:e.borderStyles.$solid,borderTopWidth:e.borderWidths.$normal,borderTopColor:e.colors.$neutralAlpha100}),children:[v.map((e=>(0,n.tZ)(l.PreviewButton,{icon:d.nR,onClick:a(e),role:"menuitem",children:(0,n.tZ)(l.UserPreview,{user:e.user})},e.id))),(0,n.tZ)(l.Action,{elementDescriptor:c.descriptors.userButtonPopoverActionButton,elementId:c.descriptors.userButtonPopoverActionButton.setId("addAccount"),iconBoxElementDescriptor:c.descriptors.userButtonPopoverActionButtonIconBox,iconBoxElementId:c.descriptors.userButtonPopoverActionButtonIconBox.setId("addAccount"),iconElementDescriptor:c.descriptors.userButtonPopoverActionButtonIcon,iconElementId:c.descriptors.userButtonPopoverActionButtonIcon.setId("addAccount"),icon:d.mm,label:(0,c.localizationKeys)("userButton.action__addAccount"),onClick:p,iconSx:e=>({width:e.sizes.$9,height:e.sizes.$6}),iconBoxSx:e=>({minHeight:e.sizes.$9,minWidth:e.sizes.$6,alignItems:"center"}),spinnerSize:"md"})]})]})},p=e=>{const{handleSignOutAllClicked:o,elementDescriptor:t,elementId:r,iconBoxElementDescriptor:s,iconBoxElementId:i,iconElementDescriptor:u,iconElementId:a,label:p,sx:B,actionSx:m}=e;return(0,n.tZ)(l.Actions,{role:"menu",sx:[e=>({padding:e.space.$2}),B],children:(0,n.tZ)(l.Action,{elementDescriptor:t||c.descriptors.userButtonPopoverActionButton,elementId:r||c.descriptors.userButtonPopoverActionButton.setId("signOutAll"),iconBoxElementDescriptor:s||c.descriptors.userButtonPopoverActionButtonIconBox,iconBoxElementId:i||c.descriptors.userButtonPopoverActionButtonIconBox.setId("signOutAll"),iconElementDescriptor:u||c.descriptors.userButtonPopoverActionButtonIcon,iconElementId:a||c.descriptors.userButtonPopoverActionButtonIcon.setId("signOutAll"),icon:d.lv,label:p||(0,c.localizationKeys)("userButton.action__signOutAll"),onClick:o,variant:"ghost",colorScheme:"neutral",sx:[e=>({backgroundColor:e.colors.$transparent,padding:`${e.space.$2} ${e.space.$3}`,borderBottomWidth:0,borderRadius:e.radii.$lg}),m],spinnerSize:"md"})})}},3898:function(e,o,t){t.r(o),t.d(o,{UserButton:function(){return A}});var n=t(2903),r=t(2784),s=t(5015),i=t(3476),c=t(8512),l=t(1661),d=t(7752),u=t(2666),a=t(9912);const p=r.forwardRef(((e,o)=>{const{close:t,...r}=e,{session:l}=(0,d.kP)(),{authConfig:p}=(0,s.useEnvironment)(),{user:B}=(0,d.aF)(),{handleAddAccountClicked:m,handleManageAccountClicked:v,handleSessionClicked:I,handleSignOutAllClicked:A,handleSignOutSessionClicked:h,handleUserProfileActionClicked:C,otherSessions:g}=(0,a.Z)({...(0,s.useUserButtonContext)(),actionCompleteCallback:t,user:B});return(0,n.tZ)(c.RootBox,{elementDescriptor:i.descriptors.userButtonPopoverRootBox,children:(0,n.BX)(c.PopoverCard.Root,{elementDescriptor:i.descriptors.userButtonPopoverCard,ref:o,role:"dialog","aria-label":"User button popover",...r,children:[(0,n.BX)(c.PopoverCard.Content,{elementDescriptor:i.descriptors.userButtonPopoverMain,children:[(0,n.tZ)(c.UserPreview,{elementId:"userButton",user:B,sx:e=>({width:"100%",padding:`${e.space.$4} ${e.space.$5}`})}),p.singleSessionMode?(0,n.tZ)(u.fB,{handleManageAccountClicked:v,handleSignOutSessionClicked:h,handleUserProfileActionClicked:C,session:l,completedCallback:t}):(0,n.tZ)(u.uj,{session:l,otherSessions:g,handleManageAccountClicked:v,handleSignOutSessionClicked:h,handleSessionClicked:I,handleAddAccountClicked:m,handleUserProfileActionClicked:C,completedCallback:t})]}),(0,n.tZ)(c.PopoverCard.Footer,{elementDescriptor:i.descriptors.userButtonPopoverFooter,children:!p.singleSessionMode&&(0,n.tZ)(u.gW,{handleSignOutAllClicked:A})})]})})}));var B=t(4016);const m=({showName:e})=>{const{user:o}=(0,d.aF)();return o&&e?(0,n.tZ)(i.Text,{variant:"subtitle",as:"span",elementDescriptor:i.descriptors.userButtonOuterIdentifier,sx:[e=>({paddingLeft:e.space.$2})],children:(0,B.Pp)(o)||(0,B.xC)(o)}):null},v=(0,c.withAvatarShimmer)((0,r.forwardRef)(((e,o)=>{const{sx:t,...r}=e,{user:l}=(0,d.aF)(),{showName:u}=(0,s.useUserButtonContext)();return(0,n.tZ)(i.Button,{elementDescriptor:i.descriptors.userButtonTrigger,variant:"roundWrapper",sx:[e=>({borderRadius:u?e.radii.$md:e.radii.$circle,color:e.colors.$colorText}),t],ref:o,"aria-label":(e.isOpen?"Close":"Open")+" user button","aria-expanded":e.isOpen,"aria-haspopup":"dialog",...r,children:(0,n.BX)(i.Flex,{elementDescriptor:i.descriptors.userButtonBox,isOpen:e.isOpen,align:"center",as:"span",gap:2,children:[(0,n.tZ)(m,{showName:u}),(0,n.tZ)(c.UserAvatar,{boxElementDescriptor:i.descriptors.userButtonAvatarBox,imageElementDescriptor:i.descriptors.userButtonAvatarImage,...l,size:e=>e.sizes.$7})]})})}))),I=(0,c.withFloatingTree)((()=>{const{defaultOpen:e}=(0,s.useUserButtonContext)(),{floating:o,reference:t,styles:d,toggle:u,isOpen:a,nodeId:B,context:m}=(0,l.Sv)({defaultOpen:e,placement:"bottom-end",offset:8}),I=(0,r.useId)();return(0,n.BX)(i.Flow.Root,{flow:"userButton",sx:{display:"inline-flex"},children:[(0,n.tZ)(v,{ref:t,onClick:u,isOpen:a,"aria-controls":a?I:void 0,"aria-expanded":a}),(0,n.tZ)(c.Popover,{nodeId:B,context:m,isOpen:a,children:(0,n.tZ)(p,{id:I,close:u,ref:o,style:{...d}})})]})})),A=(0,s.withCoreUserGuard)((0,c.withCardStateProvider)(I))},9912:function(e,o,t){t.d(o,{Z:function(){return d}});var n=t(7752),r=t(196),s=t(8512),i=t(7693),c=t(3736),l=t(2638);const d=e=>{const{setActive:o,signOut:t,openUserProfile:d}=(0,n.cL)(),u=(0,s.useCardState)(),{activeSessions:a,otherSessions:p}=(0,i.j)({user:e.user}),{navigate:B}=(0,c.useRouter)();return{handleSignOutSessionClicked:o=>()=>0===p.length?t(e.navigateAfterSignOut):t(e.navigateAfterMultiSessionSingleSignOut,{sessionId:o.id}).finally((()=>u.setIdle())),handleManageAccountClicked:()=>{var o;return"navigation"===e.userProfileMode?B(e.userProfileUrl||"").finally((()=>{(async()=>{var o;await(0,l._v)(300),null===(o=e.actionCompleteCallback)||void 0===o||o.call(e)})()})):(d(e.userProfileProps),null===(o=e.actionCompleteCallback)||void 0===o?void 0:o.call(e))},handleUserProfileActionClicked:o=>{var t;return"navigation"===e.userProfileMode?B(e.userProfileUrl||"").finally((()=>{(async()=>{var o;await(0,l._v)(300),null===(o=e.actionCompleteCallback)||void 0===o||o.call(e)})()})):(d({...e.userProfileProps,...o&&{__experimental_startPath:o}}),null===(t=e.actionCompleteCallback)||void 0===t?void 0:t.call(e))},handleSignOutAllClicked:()=>t(e.navigateAfterSignOut),handleSessionClicked:t=>async()=>(u.setLoading(),o({session:t,beforeEmit:e.navigateAfterSwitchSession}).finally((()=>{var o;u.setIdle(),null===(o=e.actionCompleteCallback)||void 0===o||o.call(e)}))),handleAddAccountClicked:()=>((0,r.T7)(e.signInUrl||window.location.href),(0,l._v)(2e3)),otherSessions:p,activeSessions:a}}}}]);